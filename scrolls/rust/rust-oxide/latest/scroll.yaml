name: registry-1.docker.io/highcard/scroll-rust-oxide
desc: Rust Oxide
version: 0.10.5
app_version: latest
init: "main.install"
processes:
  main:
    commands:
      start:
        should_change_status: start
        procedures:
          - mode: exec
            data:
              - sh
              - ./start.sh
      stop:
        type: stop
        procedures:
          - mode: rcon_web_rust
            data: quit
      install:
        procedures:
          - mode: exec
            data:
              - steamcmd
              - +force_install_dir
              - /app/resources/deployment
              - +login
              - anonymous
              - +app_update
              - "258550"
              - +quit
          - mode: exec
            data:
              - wget
              - -O
              - oxide.zip
              - https://umod.org/games/rust/download/develop
          - mode: exec
            data:
              - unzip
              - -o
              - oxide.zip
              - -d
              - /app/resources/deployment
          - mode: exec
            data:
              - rm
              - oxide.zip
          - mode: command
            data: start
plugins:
  rcon_web_rust: {}
